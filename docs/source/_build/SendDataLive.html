<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Send Data with a live Method &mdash; NovalandGuide 0.1 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Randomise Values for the participant" href="RandomiseValues.html" />
    <link rel="prev" title="Modifying HTML with JavaScript" href="ModifyingHTML.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> NovalandGuide
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="PyCharmOverview.html">PyCharmOverview</a></li>
<li class="toctree-l1"><a class="reference internal" href="CreateANewApp.html">Create a new app</a></li>
<li class="toctree-l1"><a class="reference internal" href="otreeProject.html">oTree Project</a></li>
<li class="toctree-l1"><a class="reference internal" href="CreateANewPage.html">Create a new page</a></li>
<li class="toctree-l1"><a class="reference internal" href="BasicStructureOfAPage.html">Basic structure of the page</a></li>
<li class="toctree-l1"><a class="reference internal" href="Buttons.html">Buttons</a></li>
<li class="toctree-l1"><a class="reference internal" href="DynamicText.html">Dynamic Text</a></li>
<li class="toctree-l1"><a class="reference internal" href="WaitPages.html">Wait Pages</a></li>
<li class="toctree-l1"><a class="reference internal" href="AddPictures.html">Add Pictures</a></li>
<li class="toctree-l1"><a class="reference internal" href="ModifyingHTML.html">Modifying HTML with JavaScript</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Send Data with a live Method</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#livesend">livesend</a></li>
<li class="toctree-l2"><a class="reference internal" href="#live-method">live_method</a></li>
<li class="toctree-l2"><a class="reference internal" href="#liverecv">LiveRecv</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="RandomiseValues.html">Randomise Values for the participant</a></li>
<li class="toctree-l1"><a class="reference internal" href="BankAccount.html">Bank Account</a></li>
<li class="toctree-l1"><a class="reference internal" href="DataRetrievalwithSessionFieldValue.html">Data Retrieval with Session Field variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="Election.html">Election</a></li>
<li class="toctree-l1"><a class="reference internal" href="Heroku.html">Heroku</a></li>
<li class="toctree-l1"><a class="reference internal" href="IndividualSettingsForTheSession.html">Individual settings for the session:</a></li>
<li class="toctree-l1"><a class="reference internal" href="DataCollection.html">Data Collection</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">NovalandGuide</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a></li>
      <li class="breadcrumb-item active">Send Data with a live Method</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/SendDataLive.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="send-data-with-a-live-method">
<h1>Send Data with a live Method<a class="headerlink" href="#send-data-with-a-live-method" title="Permalink to this heading"></a></h1>
<p>The live_method feature allows for real-time updates to be sent from the server to the participant’s browser without requiring a full page refresh. To use live_method, data must first be sent using livesend.
The data that is sent via livesend can be received by the live_method function, which can then trigger a function in the backend that can have an impact on the participant.</p>
<section id="livesend">
<h2>livesend<a class="headerlink" href="#livesend" title="Permalink to this heading"></a></h2>
<p>livesend is an oTree method that allows you to send data from the server to the client side in real time.
It can be used, for example, to update the display of a page or to trigger a JavaScript function on the client side.
The livesend method takes two arguments: a string that identifies the type of data being sent, and the actual data to be sent.
The data can be in any format, such as a string, integer, list, or dictionary.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">liveSend({&quot;Variable&quot;: &quot;Value&quot;})</span>
</pre></div>
</div>
<p>We are creating a scenario in which a query is made on an HTML page and it is transmitted live to the init.py page.
However, the init.py page immediately sends a signal back so that the page can continue, for example.</p>
<p>HTML:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">&lt;input type=&quot;radio&quot; onclick=&quot;functionNameForYes()&quot; class=&quot;radio&quot;&gt; Yes &lt;/input&gt;</span>
<span class="go">&lt;input type=&quot;radio&quot; onclick=&quot;functionNameForNo()&quot; class=&quot;radio&quot;&gt; No&lt;/input&gt;</span>
</pre></div>
</div>
<p>The ‘type’ attribute is set to “radio” to indicate that they are radio buttons.
The ‘onclick’ attribute is used to call JavaScript functions when the radio button is clicked.</p>
<p>The first radio button has the label “Yes” and the onclick attribute is set to call a JavaScript function called functionNameForYes().
The second radio button has the label “No” and the onclick attribute is set to call a different JavaScript function called functionNameForNo().</p>
<p>Both radio buttons have a class attribute with a value of “radio”, which can be used for styling or selecting these elements using JavaScript or CSS.</p>
<p>To trigger the functions, they must be included as JavaScript code between two script tags.
It’s important that the name of the JavaScript function matches the name of the function we determined to trigger at the top.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">&lt;script&gt;</span>
<span class="go">function functionNameForYes(){</span>
<span class="go">    liveSend({&quot;QuestionAnswer&quot;: &quot;Yes&quot;})</span>
<span class="go">}</span>

<span class="go">function functionNameForNo(){</span>
<span class="go">    liveSend({&quot;QuestionAnswer&quot;: &quot;No&quot;})</span>
<span class="go">}</span>
<span class="go">&lt;/script&gt;</span>
</pre></div>
</div>
<p>Now we have written a JavaScript function that sends data to init.py when a button is pressed on the HTML page.</p>
</section>
<section id="live-method">
<h2>live_method<a class="headerlink" href="#live-method" title="Permalink to this heading"></a></h2>
<p>he live_method feature allows for real-time updates to be sent from the server to the participant’s browser without requiring a full page refresh.
To use live_method, data must first be sent using livesend.
The data that is sent via livesend can be received by the live_method function, which can then trigger a function in the backend that can have an impact on the participant.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">class pageName(Page):</span>
<span class="go">    @staticmethod</span>
<span class="go">        def live_method(player: Player, data):</span>
<span class="go">            if &quot;QuestionAnswer&quot; in data:</span>
<span class="go">                player.Question = data[&quot;QuestionAnswer&quot;]</span>
</pre></div>
</div>
<p>The method takes two arguments: ‘player’ and ‘data’.
The ‘player’ argument is an instance of the ‘Player’ class in oTree and represents the participant whose browser is sending the update.
The data argument is a dictionary containing the data sent from the participant’s browser.</p>
<p>The method checks if the “QuestionAnswer” key is in the data dictionary.
If it is, then the method sets the ‘Question’ attribute of the ‘player’ instance to the value associated with the “QuestionAnswer” key in the data dictionary.</p>
</section>
<section id="liverecv">
<h2>LiveRecv<a class="headerlink" href="#liverecv" title="Permalink to this heading"></a></h2>
<p>To send information back to the live participant page, you can create a LiveRecv function in the HTML page that can receive the data from the backend or live_method.</p>
<p>Here’s an example of a LiveRecv function:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">function liveRecv(data) {</span>
<span class="go">        if (data[&#39;type&#39;] == &#39;NextPage&#39;) {</span>
<span class="go">            document.getElementById(&quot;form&quot;).submit();</span>
<span class="go">        }</span>
<span class="go">    }</span>
</pre></div>
</div>
<p>This function takes a single parameter called data, which is expected to be an object that contains information sent from the server to the client browser.
In this example, the function checks if the type key in the data object is equal to the string ‘NextPage’ using an if statement.
If the condition is true, the function calls the submit() method of the HTML form element with the ID “form”.
This causes the browser to submit the form and move to the next page of the experiment.</p>
<p>To define the data that needs to be sent, it is already defined in the live_method in the init.py file.
If we want to send data based on the example above, we can write the information in the live_method in the init.py file.</p>
<p>Here’s an example:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">class pageName(Page):</span>
<span class="go">        @staticmethod</span>
<span class="go">        def live_method(player: Player, data):</span>
<span class="go">            return {0: dict(type=&#39;NextPageData&#39;)}</span>
</pre></div>
</div>
<p>In this example, we’ve given the data value on the participant page the variable ‘NextPageData’ in the live_method.
This sends the page in the example above to the next page.</p>
<p>So in summary, livesend is used to send data from the server to the client side in real time, live_method is used to receive this data and trigger a function in the backend, and LiveRecv is used to receive data back from the backend and define how it should be used on the client side.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="ModifyingHTML.html" class="btn btn-neutral float-left" title="Modifying HTML with JavaScript" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="RandomiseValues.html" class="btn btn-neutral float-right" title="Randomise Values for the participant" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, University Duisburg.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>